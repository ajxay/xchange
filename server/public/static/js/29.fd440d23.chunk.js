"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[29],{9029:function(e,t,r){r.r(t),r.d(t,{default:function(){return N}});var a=r(9439),n=r(2791),s=r(6946),l=r(9434),o=r(7132),i=r(184);var u=function(e){return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"w-full bg-slate-200 text-gray-600 body-font mx-auto flex justify-center flex-wrap p-10",children:e.children})})};var d=function(e){var t=e.setCurrentId,r=e.setShowModal,a=(0,l.v9)((function(e){return e.posts}));return a.length?(0,i.jsx)(u,{children:a.map((function(e){return!0===e.exchanged||!0===e.removed?(0,i.jsx)(n.Fragment,{},e._id):(0,i.jsx)(s.Z,{setCurrentId:t,setShowModal:r,post:e},e._id)}))}):(0,i.jsx)(o.Z,{})},c=r(4165),m=r(5861),x=r(1413),g=r(9403),f=r.n(g),b=r(9895),h=r(8882),p=r(9396),v=r(7692),y=r(7111),j=r.n(y);var k=function(e){var t,r=e.currentId,s=(e.setCurrentId,e.setShowModal),o=e.showModal,u=(0,n.useState)(!1),d=(0,a.Z)(u,2),g=d[0],y=d[1],k=(0,n.useState)({title:"",message:"",tags:"",selectedFile:"",location:{type:"Point",coordinates:[]},summary:""}),w=(0,a.Z)(k,2),N=w[0],Z=w[1],C=(0,l.v9)((function(e){return r?e.posts.find((function(e){return e._id===r})):null})),S=(0,l.I0)(),I=JSON.parse(localStorage.getItem("profile"));(0,n.useEffect)((function(){C&&Z(C)}),[C]);var M=function(){var e=(0,m.Z)((0,c.Z)().mark((function e(t){var r,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,(0,p.H2)(t);case 3:r=e.sent,a=r.data,Z((0,x.Z)((0,x.Z)({},N),{},{summary:a.trim()})),(a||N.summary.length>5)&&y(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=(0,m.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M(N.title);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){null,Z({title:"",message:"",tags:"",selectedFile:"",location:{type:"Point",coordinates:[]},summary:""})};return null!==I&&void 0!==I&&null!==(t=I.result)&&void 0!==t&&t.name?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{className:"bg-slate-900 align-middle block ml-auto mr-auto mt-5 text-white active:bg-pink-600 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 ease-linear transition-all duration-150",type:"button",onClick:function(){return s(!0)},children:(0,i.jsxs)("p",{className:"flex",children:["Create Ad"," ",(0,i.jsx)("p",{className:"text-xl ml-2",children:(0,i.jsx)(v.zmG,{})})]})}),o?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("form",{className:"md:w-3/5",autoComplete:"off",noValidate:!0,onSubmit:function(e){var t,a,n;(e.preventDefault(),r)?S((0,b.CP)(r,(0,x.Z)((0,x.Z)({},N),{},{name:null===I||void 0===I||null===(t=I.result)||void 0===t?void 0:t.name}))):S((0,b.qb)((0,x.Z)((0,x.Z)({},N),{},{name:null===I||void 0===I||null===(a=I.result)||void 0===a?void 0:a.name,creatorImage:null===I||void 0===I||null===(n=I.result)||void 0===n?void 0:n.picture})));s(!1),P()},children:(0,i.jsx)("div",{className:"".concat(g?"backdrop-filter backdrop-blur-lg ":""," transition duration-500 ease-out justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none"),children:(0,i.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-3xl",children:(0,i.jsxs)("div",{className:"border-0 py-5 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between px-5 border-b border-solid border-slate-200 rounded-t",children:[(0,i.jsxs)("p",{className:" text-slate-900 text-3xl  font-semibold py-2",children:[r?"Editing":"Creating"," a Post"]}),(0,i.jsx)("button",{type:"button",className:"p-1 ml-auto bg-transparent border-0 text-black opacity-5 float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:function(){return s(!1)},children:(0,i.jsx)("span",{className:"bg-transparent text-black opacity-5 h-6 w-6 text-2xl block outline-none focus:outline-none",children:"\xd7"})})]}),(0,i.jsx)("div",{className:"relative px-6 flex-auto",children:(0,i.jsx)("p",{className:"my-4 text-slate-500 text-lg leading-relaxed",children:(0,i.jsx)("section",{className:"text-gray-600 body-font",children:(0,i.jsxs)("div",{className:"container relative bg-slate-900 rounded px-5 py-5 mx-auto",children:[(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsx)("input",{name:"title",variant:"outlined",label:"Title",value:N.title,onChange:function(e){return Z((0,x.Z)((0,x.Z)({},N),{},{title:e.target.value}))},className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Title",required:!0})}),(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsx)("input",{name:"tags",variant:"outlined",label:"Tags",value:N.tags,onChange:function(e){return Z((0,x.Z)((0,x.Z)({},N),{},{tags:e.target.value}))},className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Tags",required:!0})}),(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsx)("input",{name:"message",variant:"outlined",label:"Message",value:N.message,onChange:function(e){return Z((0,x.Z)((0,x.Z)({},N),{},{message:e.target.value}))},className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Author",required:!0})}),(0,i.jsx)("div",{className:"mb-1",children:(0,i.jsx)("textarea",{rows:"4",name:"message",variant:"outlined",label:"Message",value:N.summary,onChange:function(e){return Z((0,x.Z)((0,x.Z)({},N),{},{summary:e.target.value}))},className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Summary",required:!0})}),N.title.length>5&&(0,i.jsx)("button",{type:"button",onClick:function(){return F()},className:"float-right font-normal text-sm text-yellow-200 ",children:g?(0,i.jsxs)("div",{className:"h-screen absolute bottom-0 left-32 flex  flex-col items-center justify-center",children:[(0,i.jsx)(j(),{className:"h-5",color:"yellow",loading:!0,size:10,"aria-label":"Loading Spinner","data-testid":"loader"}),"Lodaing.."]}):(0,i.jsx)(i.Fragment,{children:" Auto generate Summary?"})}),(0,i.jsx)("div",{className:"my-6 mt-10",children:(0,i.jsx)(h.Z,{postData:N,setPostData:Z,post:!0})}),(0,i.jsx)(f(),{type:"file",multiple:!1,onDone:function(e){var t=e.base64;return Z((0,x.Z)((0,x.Z)({},N),{},{selectedFile:t}))}})]})})})}),(0,i.jsxs)("div",{className:"flex items-center justify-end p-6 border-t border-solid border-slate-200 rounded-b",children:[(0,i.jsx)("button",{className:"text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"button",onClick:function(){return s(!1)},children:"Close"}),(0,i.jsx)("button",{className:"bg-emerald-500 text-white active:bg-emerald-600 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"submit",children:"Save Changes"})]})]})})})}),(0,i.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]}):null]}):(0,i.jsx)("div",{children:(0,i.jsx)("p",{className:"text-white",children:"Please Log in to create posts"})})},w=r(7689);var N=function(){var e=(0,n.useState)(!1),t=(0,a.Z)(e,2),r=t[0],s=t[1],o=(0,n.useState)(null),u=(0,a.Z)(o,2),c=u[0],m=u[1],x=(0,n.useState)(""),g=(0,a.Z)(x,2),f=g[0],p=g[1],v=(0,n.useState)(null),y=(0,a.Z)(v,2),j=y[0],N=y[1],Z=(0,l.I0)(),C=new URLSearchParams((0,w.TH)().search),S=(0,w.s0)();C.get("page"),C.get("searchQuery"),(0,l.v9)((function(e){return e.posts})),(0,n.useEffect)((function(){c?(Z((0,b.Am)(c)),S("/posts/location?lat=".concat(c.coordinates[0]||"none","&lgt=").concat(c.coordinates[1]||"none"))):Z((0,b.Jq)())}),[j,Z,c]);var I=function(){f.trim()?(Z((0,b.oP)({search:f})),S("/posts/search?searchQuery=".concat(f||"none"))):S("/posts")};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k,{currentId:j,setCurrentId:N,showModal:r,setShowModal:s}),(0,i.jsxs)("div",{className:"flex justify-between mr-12 ",children:[(0,i.jsx)("div",{className:"w-1/5",children:(0,i.jsx)(h.Z,{locationSearch:!0,location:c,setLocation:m})}),(0,i.jsxs)("div",{className:"flex space-x-1",children:[(0,i.jsx)("input",{name:"search",value:f,onChange:function(e){return p(e.target.value)},onKeyDown:function(e){13===e.keyCode&&I()},type:"text",className:"block w-full px-3 h-10 text-slate-400 bg-slate-900 border rounded-full border-none focus:outline-none focus:ring focus:ring-opacity-40",placeholder:"Search Books..."}),(0,i.jsx)("button",{onClick:I,className:"px-3 h-10 text-slate-400 bg-slate-900 rounded-full ",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]}),(0,i.jsx)(d,{setCurrentId:N,setShowModal:s})]})}}}]);
//# sourceMappingURL=29.fd440d23.chunk.js.map